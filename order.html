<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RESERVE YOUR LEGACY | K-REALMS</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { background: #fff; color: #111; }
        .order-container { max-width: 700px; margin: 150px auto; padding: 60px; border: 1px solid #eee; background: #fff; box-shadow: 0 10px 50px rgba(0,0,0,0.02); }
        .order-header { text-align: center; margin-bottom: 50px; }
        .order-header h2 { font-weight: 100; letter-spacing: 8px; text-transform: uppercase; margin-bottom: 10px; }
        .price-badge { display: inline-block; padding: 10px 20px; border: 1px solid var(--rr-gold); color: var(--rr-gold); font-size: 14px; letter-spacing: 2px; }
        .payment-box { background: #fcfcfc; border: 1px solid #eee; padding: 30px; margin-bottom: 40px; }
        .payment-address { font-family: monospace; font-size: 13px; color: #111; margin: 15px 0; border-bottom: 1px solid #eee; padding-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .copy-btn { color: var(--rr-gold); font-size: 9px; cursor: pointer; text-transform: uppercase; border: 1px solid var(--rr-gold); padding: 2px 8px; }
        .input-group { margin-bottom: 25px; }
        label { display: block; font-size: 11px; color: #888; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        input[type="text"], input[type="file"] { width: 100%; padding: 15px; border: 1px solid #eee; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--rr-gold); }
        .submit-btn { width: 100%; padding: 20px; background: #111; color: #fff; border: none; font-size: 12px; font-weight: bold; cursor: pointer; letter-spacing: 3px; text-transform: uppercase; margin-top: 30px; }
        .submit-btn:hover { background: var(--rr-gold); }
    </style>
</head>
<body>
    <div id="custom-cursor"></div>
    <header class="main-header">
        <button onclick="history.back()" style="background:none; border:none; letter-spacing:2px; color:var(--rr-gold); font-weight:bold;">← BACK</button>
        <div class="logo-center"><div class="rr-logo-box"><span class="k-up">K</span><span class="k-down">K</span></div></div>
        <div></div>
    </header>

    <div class="order-container">
        <div class="order-header">
            <p style="font-size: 10px; color: var(--rr-gold); letter-spacing: 5px;">BESPOKE RESERVATION</p>
            <h2 id="plot-title">SECURE YOUR SPOT</h2>
            <div id="plot-details" style="font-size: 11px; letter-spacing: 2px; color: #666; margin-bottom: 20px;">LOADING...</div>
            <div id="dynamic-price" class="price-badge">$0,000</div>
        </div>

        <div class="payment-box">
            <div class="payment-address"><span>BINANCE UID: 912221034</span><span class="copy-btn">Copy</span></div>
            <div class="payment-address"><span>USDT (TRC20): TTapBkTqrDnzHbWzek6wSBUTcJKFmR8Ws6</span><span class="copy-btn">Copy</span></div>
        </div>

        <div class="input-group">
            <label>Channel / Profile Link</label>
            <input type="text" id="social-link" placeholder="https://youtube.com/c/yourname">
        </div>
        <div class="input-group">
            <label>Verification Proof (Dashboard Screenshot)</label>
            <input type="file" id="proof-img">
        </div>
        <div class="input-group">
            <label>Official Email</label>
            <input type="text" id="cust-email" placeholder="owner@domain.com">
        </div>

        <button class="submit-btn" id="submit-btn">SUBMIT APPLICATION</button>
    </div>

    <script src="script.js"></script>
    <script type="module">
        import { db, ref, set } from "./firebase-config.js";
        const params = new URLSearchParams(window.location.search);
        const realm = params.get('g');
        const plotID = params.get('p');
        const price = params.get('pr');

        document.getElementById('plot-details').innerText = `${realm} REALM | PLOT #${plotID}`;
        document.getElementById('dynamic-price').innerText = price === "Auction" ? "BY AUCTION" : `$${price}`;

        document.getElementById('submit-btn').onclick = () => {
            const link = document.getElementById('social-link').value;
            const email = document.getElementById('cust-email').value;
            if(!link || !email) { alert("Please complete the form."); return; }

            set(ref(db, `pending_orders/${realm}/${plotID}`), {
                realm, plotID, price, socialLink: link, email, timestamp: Date.now(), status: "Pending"
            }).then(() => {
                location.href = 'congrats.html'; // অভিনন্দন পেজে নিয়ে যাবে
            });
        };
    </script>
</body>
</html>
