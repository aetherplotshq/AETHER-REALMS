<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><title>REALM MAP</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<nav style="display:flex; justify-content:space-between; padding:20px; background:#111; border-bottom:2px solid gold;">
    <button onclick="location.href='index.html'" class="plot-frame" style="padding:10px 20px;">ЁЯПа HOME</button>
    <div id="rTitle" style="color:gold; font-size:28px; font-family:'Cinzel Decorative';"></div>
    <button onclick="location.href='support.html'" class="plot-frame" style="padding:10px 20px;">ЁЯУЬ NEWS/RULES</button>
</nav>

<div style="padding:120px 20px; text-align:center;">
    <div style="display:flex; justify-content:center; gap:40px; align-items:flex-end; margin-bottom:100px;">
        <div id="K4" class="main-beast-container"><div class="plot-frame" onclick="goBuy('K4')">COMMANDER</div></div>
        <div id="K2" class="main-beast-container"><div class="plot-frame" onclick="goBuy('K2')">GUARDIAN</div></div>
        <div id="Leader" class="main-beast-container" style="transform:scale(1.3);"><div class="plot-frame" onclick="goBuy('Leader')">KING</div></div>
        <div id="K3" class="main-beast-container"><div class="plot-frame" onclick="goBuy('K3')">GUARDIAN</div></div>
        <div id="K5" class="main-beast-container"><div class="plot-frame" onclick="goBuy('K5')">COMMANDER</div></div>
    </div>
    
    <div id="grid95" style="display:grid; grid-template-columns: repeat(10, 1fr); gap:15px; max-width:1100px; margin:auto;"></div>
</div>

<div class="ghost-chat-icon" onclick="location.href='ghost-chat.html'">ЁЯТА</div>

<script type="module">
    import { db, ref, onValue } from "./firebase-config.js";

    const realm = new URLSearchParams(window.location.search).get('realm');
    document.getElementById('rTitle').innerText = realm + " REALM";

    // ржЗржнрзЛрж▓рж┐ржЙрж╢ржи рж▓ржЬрж┐ржХ
    const mainIds = ['Leader', 'K2', 'K3', 'K4', 'K5'];
    mainIds.forEach(id => {
        onValue(ref(db, 'plots/'+id), (s) => {
            const data = s.val();
            if(data && data.level >= 10) {
                document.getElementById(id).classList.add('lvl-10');
                // рж▓рж╛рж░рзНржнрж╛/ржмрж┐рж╕рзНржЯ ржЗржорзЗржЬ ржЕрзНржпрж╛ржб ржХрж░рж╛
                if(!document.getElementById('img_'+id)){
                   document.getElementById(id).innerHTML += `<img id="img_${id}" src="beast_${id}.png" class="beast-image">`;
                }
            }
        });
    });

    // рзпрзлржЯрж┐ ржкрзНрж▓ржЯ ржЬрзЗржирж╛рж░рзЗржЯ
    for(let i=1; i<=95; i++) {
        document.getElementById('grid95').innerHTML += `<div class="plot-frame" style="width:70px; height:70px; font-size:12px; display:flex; align-items:center; justify-content:center;" onclick="goBuy('#${i}')">#${i}</div>`;
    }

    window.goBuy = (id) => { location.href = `acquire.html?id=${id}`; }
</script>
</body>
</html>
