<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>ASSET MAP</title><link rel="stylesheet" href="style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script></head><body id="capture">
<nav style="padding: 30px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,215,0,0.1);">
    <button onclick="location.href='index.html'" class="nav-btn">DISCONNECT</button>
    <h2 id="rT" style="color:gold; font-family:'Syncopate'; letter-spacing:10px;">MAP</h2>
    <button onclick="downMap()" class="nav-btn" style="background:gold; color:black;">DOWNLOAD MAP</button>
</nav>
<div style="display:flex;">
    <div style="width:300px; height:80vh; background:rgba(0,0,0,0.5); border-right:1px solid rgba(255,215,0,0.2); display:flex; flex-direction:column;">
        <div style="padding:15px; color:gold; font-size:12px; border-bottom:1px solid rgba(255,215,0,0.1);">LIVE REALM CHAT ðŸ’¬</div>
        <div id="gameChat" style="flex:1; overflow-y:auto; padding:15px; font-size:13px; color:#aaa;"></div>
        <div id="chatLock" style="padding:20px; text-align:center; color:#444; font-size:10px;">PURCHASE PLOT TO UNLOCK CHAT</div>
        <input type="text" id="mInp" placeholder="Type message..." style="display:none; background:#111; border:none; border-top:1px solid gold; padding:15px; color:white;">
    </div>
    <div style="flex:1; text-align:center; padding-top:50px;">
        <div id="kings" style="display:flex; justify-content:center; gap:40px; margin-bottom:80px;"></div>
        <div id="plots" style="display:grid; grid-template-columns: repeat(14, 1fr); gap:10px; padding:0 50px;"></div>
    </div>
</div>
<script>
    const url = new URLSearchParams(window.location.search); const r = url.get('realm');
    document.getElementById('rT').innerText = r.toUpperCase();
    const kings = document.getElementById('kings');
    for(let i=1;i<=5;i++) kings.innerHTML += `<div class="king-plot" onclick="location.href='order.html?id=KINGDOM-${i}&price=9999&realm=${r}'" style="width:180px; height:220px; cursor:pointer;"><div class="royal-crown" style="font-size:100px; top:-60px;">ðŸ‘‘</div><div style="margin-top:100px; color:gold; font-weight:900;">$9,999</div></div>`;
    const plots = document.getElementById('plots');
    for(let i=1;i<=95;i++){ let p=(i<=28)?1599:(i<=56)?1299:999; plots.innerHTML += `<div onclick="location.href='order.html?id=${i}&price=${p}&realm=${r}'" style="aspect-ratio:1/1; border:1px solid rgba(255,215,0,0.1); color:gold; font-size:10px; display:flex; align-items:center; justify-content:center; cursor:pointer;">#${i}</div>`; }
    function downMap(){ html2canvas(document.querySelector("#capture")).then(canvas => { let link = document.createElement('a'); link.download = r+'_Property_Map.png'; link.href = canvas.toDataURL(); link.click(); }); }
    if(localStorage.getItem('hasPlot')==='true'){
        document.getElementById('chatLock').style.display='none';
        document.getElementById('mInp').style.display='block';
        document.getElementById('mInp').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                const msg = this.value; if(!msg) return;
                document.getElementById('gameChat').innerHTML += `<div style="margin-bottom:10px;"><b style="color:gold;">[#${localStorage.getItem('uPlot')}]</b>: ${msg}</div>`;
                this.value = '';
            }
        });
    }
    setInterval(() => { document.getElementById('gameChat').innerHTML = ''; }, 1800000); // 30 min auto-delete
</script></body></html>
