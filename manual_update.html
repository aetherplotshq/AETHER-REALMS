<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MASTER CONTROL | K-REALMS</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { background: #fff; color: #111; }
        .update-container { max-width: 600px; margin: 150px auto; padding: 50px; border: 1px solid var(--rr-border); background: #fff; }
        .input-group { margin-bottom: 25px; }
        label { display: block; font-size: 10px; letter-spacing: 2px; color: #888; margin-bottom: 8px; text-transform: uppercase; }
        select, input {
            width: 100%; padding: 15px; background: #fff; border: 1px solid var(--rr-border); font-size: 14px; outline: none;
        }
        select:focus, input:focus { border-color: var(--rr-gold); }
        .update-btn {
            width: 100%; padding: 20px; background: var(--rr-black); color: #fff; border: none;
            font-size: 12px; font-weight: bold; letter-spacing: 3px; cursor: pointer; text-transform: uppercase;
        }
        .update-btn:hover { background: var(--rr-gold); }
        .preview-box { width: 100px; height: 100px; border: 1px solid var(--rr-gold); margin-top: 20px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .preview-box img { width: 100%; height: 100%; object-fit: cover; }
    </style>
</head>
<body>
    <div id="custom-cursor"></div>
    <header class="main-header">
        <div class="logo-center"><div class="rr-logo-box"><span class="k-up">K</span><span class="k-down">K</span></div></div>
        <div style="letter-spacing:3px; font-size:10px; color:var(--rr-gold);">MANUAL OVERRIDE</div>
    </header>

    <div class="update-container">
        <h2 style="font-weight:100; letter-spacing:5px; text-align:center; margin-bottom:40px;">UPDATE PLOT STATUS</h2>

        <div class="input-group">
            <label>Select Realm</label>
            <select id="realm-select">
                <option value="Gaming">Gaming Realm</option>
                <option value="Social">Social Domain</option>
                <option value="Millionaire">Millionaire Club</option>
            </select>
        </div>

        <div class="input-group">
            <label>Plot Number (e.g. 1, 15, 105)</label>
            <input type="text" id="plot-id" placeholder="Enter Plot ID">
        </div>

        <div class="input-group">
            <label>Owner Logo URL (Direct Link)</label>
            <input type="text" id="logo-url" placeholder="https://image-link.com/logo.jpg" oninput="previewLogo()">
        </div>

        <div class="input-group">
            <label>Redirect Link (Social/Website)</label>
            <input type="text" id="target-link" placeholder="https://youtube.com/c/owner">
        </div>

        <div class="input-group">
            <label>Logo Preview</label>
            <div class="preview-box" id="logo-preview"><span style="font-size:8px; color:#ccc;">NO IMAGE</span></div>
        </div>

        <button class="update-btn" onclick="pushUpdate()">Update Plot Now</button>
    </div>

    <script src="script.js"></script>
    <script type="module">
        import { db, ref, set } from "./firebase-config.js";

        window.previewLogo = () => {
            const url = document.getElementById('logo-url').value;
            const preview = document.getElementById('logo-preview');
            if(url) preview.innerHTML = `<img src="${url}">`;
        }

        window.pushUpdate = () => {
            const realm = document.getElementById('realm-select').value;
            const id = document.getElementById('plot-id').value;
            const logo = document.getElementById('logo-url').value;
            const link = document.getElementById('target-link').value;

            if(!id || !logo || !link) {
                alert("Please provide all bespoke data.");
                return;
            }

            // এই ডাটাবেস এন্ট্রি সরাসরি ম্যাপের লজিক পাল্টে দিবে
            set(ref(db, `sold_plots/${realm}/${id}`), {
                logo: logo,
                link: link,
                owner: "Verified Member"
            }).then(() => {
                alert(`SUCCESS: Plot #${id} in ${realm} has been updated.`);
                location.reload();
            });
        }
    </script>
</body>
</html>
