<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ESTATE CONTROLLER | AETHER PLOTS</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { background: #fdfdfd; }
        .update-wrapper { 
            max-width: 500px; 
            margin: 150px auto; 
            padding: 50px; 
            background: #fff; 
            border: 1px solid #eee; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.02);
        }
        
        .update-wrapper h2 { 
            font-weight: 100; 
            letter-spacing: 5px; 
            text-align: center; 
            margin-bottom: 30px; 
            font-size: 18px;
        }

        .input-group { margin-bottom: 20px; }
        label { 
            display: block; 
            font-size: 10px; 
            letter-spacing: 2px; 
            color: #888; 
            margin-bottom: 8px; 
            text-transform: uppercase;
        }

        input, select { 
            width: 100%; 
            padding: 15px; 
            border: 1px solid #eee; 
            background: #fafafa;
            outline: none; 
            font-size: 13px;
            transition: 0.3s;
        }

        input:focus, select:focus { 
            border-color: var(--gold); 
            background: #fff;
        }

        .publish-btn { 
            width: 100%; 
            padding: 20px; 
            background: #111; 
            color: #fff; 
            border: none; 
            cursor: pointer; 
            letter-spacing: 3px; 
            font-size: 11px;
            margin-top: 20px;
            transition: 0.4s;
        }

        .publish-btn:hover { 
            background: var(--gold); 
            transform: translateY(-2px);
        }

        .helper-text { font-size: 9px; color: #aaa; margin-top: 5px; }
    </style>
</head>
<body>
    <div id="custom-cursor"></div>

    <header class="header">
        <button onclick="history.back()" style="background:none; border:none; letter-spacing:2px;">← BACK</button>
        <div class="logo">A<span>K</span></div>
        <div style="font-size:10px; letter-spacing:2px; color:var(--gold);">ADMIN ACCESS</div>
    </header>

    <div class="update-wrapper">
        <h2>Update Plot Assets</h2>
        
        <div class="input-group">
            <label>Select Realm</label>
            <select id="realm-id">
                <option value="Gaming">Gaming Realm (100 Plots)</option>
                <option value="Social">Social Realm (100 Plots)</option>
                <option value="Millionaire">Millionaire Club (365 Plots)</option>
            </select>
        </div>

        <div class="input-group">
            <label>Plot Number</label>
            <input type="number" id="plot-no" placeholder="e.g. 24">
        </div>

        <div class="input-group">
            <label>Logo Image URL</label>
            <input type="text" id="logo-url" placeholder="https://example.com/logo.png">
            <p class="helper-text">Direct link of the customer's brand logo.</p>
        </div>

        <div class="input-group">
            <label>Destination Link</label>
            <input type="text" id="target-link" placeholder="https://youtube.com/user">
            <p class="helper-text">The website or channel this plot will open.</p>
        </div>

        <button class="publish-btn" onclick="pushUpdate()">Publish to Estate</button>
    </div>

    <script type="module">
        import { db, ref, set } from "./firebase-config.js";

        window.pushUpdate = () => {
            const realm = document.getElementById('realm-id').value;
            const plotId = document.getElementById('plot-no').value;
            const logo = document.getElementById('logo-url').value;
            const link = document.getElementById('target-link').value;

            if(!plotId || !logo || !link) {
                alert("Please fill all fields to maintain the legacy.");
                return;
            }

            // Firebase-এ ডাটা পুশ করা
            set(ref(db, `sold_plots/${realm}/${plotId}`), {
                logo: logo,
                link: link,
                timestamp: Date.now()
            }).then(() => {
                alert(`Plot #${plotId} in ${realm} has been successfully updated.`);
                // ইনপুট ফিল্ড খালি করা
                document.getElementById('plot-no').value = "";
                document.getElementById('logo-url').value = "";
                document.getElementById('target-link').value = "";
            }).catch((error) => {
                console.error(error);
                alert("Update failed. Check your Firebase Rules.");
            });
        };
    </script>
    <script src="script.js"></script>
</body>
</html>
