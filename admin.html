<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><title>ADMIN PANEL</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { background: #000; color: gold; padding: 20px; }
        .panel { border: 1px solid gold; padding: 20px; margin-bottom: 20px; background: #111; }
        table { width: 100%; color: white; border-collapse: collapse; }
        th, td { border: 1px solid #333; padding: 10px; }
    </style>
</head>
<body>
    <h1>SHIP CONTROL PANEL</h1>
    <div class="panel">
        <h2>ORDERS</h2>
        <table id="orderTable">
            <tr><th>Plot</th><th>Name</th><th>Action</th></tr>
        </table>
    </div>

    <div class="panel">
        <h2>UPDATE PLOT</h2>
        <input type="text" id="pId" placeholder="Plot ID">
        <input type="number" id="pLvl" placeholder="Level (1-10)">
        <button onclick="updatePlot()">UPDATE LIVE</button>
    </div>

<script type="module">
    import { db, ref, onValue, update, remove } from "./firebase-config.js";

    onValue(ref(db, 'orders'), (snap) => {
        const table = document.getElementById('orderTable');
        table.innerHTML = '<tr><th>Plot</th><th>Name</th><th>Action</th></tr>';
        snap.forEach(c => {
            const d = c.val();
            table.innerHTML += `<tr><td>${d.plotId}</td><td>${d.customerName}</td><td><button onclick="document.getElementById('pId').value='${d.plotId}'">SELECT</button></td></tr>`;
        });
    });

    window.updatePlot = () => {
        const id = document.getElementById('pId').value;
        const lvl = document.getElementById('pLvl').value;
        update(ref(db, 'plots/' + id), { level: parseInt(lvl), status: 'active' })
        .then(() => alert("Plot Updated!"));
    }
</script>
</body>
</html>
