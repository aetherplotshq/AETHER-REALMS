<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SOCIAL CREATORS | 1M PIXEL GRID</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        :root { --gold: #9E7E45; --white: #ffffff; }
        body { margin: 0; background: #000; color: #fff; font-family: 'Times New Roman', serif; overflow-x: hidden; }

        /* Navigation */
        .top-nav { position: fixed; top: 0; width: 100%; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; z-index: 1000; background: rgba(0,0,0,0.98); border-bottom: 2px solid var(--gold); box-sizing: border-box; }
        .nav-left { display: flex; gap: 10px; }
        .nav-btn { background: none; border: 1px solid #444; color: #fff; padding: 10px 15px; font-size: 11px; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .nav-btn:hover { background: var(--gold); color: #fff; border-color: #fff; }

        /* Header Animation */
        .header-area { text-align: center; padding-top: 100px; margin-bottom: 20px; background: #000; }
        .section-name { 
            font-size: clamp(30px, 6vw, 70px); letter-spacing: 8px; font-weight: 900;
            background: linear-gradient(90deg, #FFD700, #FFB800, #FF8C00, #FF4500, #FF0055, #D400FF, #7A00FF, #0070FF, #00C3FF, #00FFCC);
            background-size: 300% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: fullColorShift 8s linear infinite; margin: 0;
        }
        @keyframes fullColorShift { 0% { background-position: 0% center; } 100% { background-position: 300% center; } }

        /* Zoomable Canvas Area */
        .viewport { 
            width: 100%; height: 70vh; overflow: auto; background: #222; 
            display: flex; justify-content: center; align-items: center;
            position: relative; border-top: 1px solid #333; border-bottom: 1px solid #333;
        }
        .canvas-wrapper { 
            width: 1000px; height: 1000px; background: #fff; position: relative;
            background-image: linear-gradient(#eee 1px, transparent 1px), linear-gradient(90deg, #eee 1px, transparent 1px);
            background-size: 10px 10px; transform-origin: center center; transition: transform 0.1s ease;
        }
        .plot-unit { position: absolute; width: 10px; height: 10px; cursor: crosshair; box-sizing: border-box; }
        .plot-unit:hover { background: rgba(158, 126, 69, 0.5); border: 0.1px solid #000; }

        /* Footer Info (Like Million Dollar Homepage) */
        .homepage-info { text-align: center; padding: 40px 20px; background: #000; }
        .info-box { max-width: 1000px; margin: 0 auto; color: #888; font-size: 12px; line-height: 1.6; border: 1px solid #222; padding: 20px; }
        .stat-line { color: var(--gold); font-weight: bold; margin-bottom: 10px; font-size: 14px; }

        /* Modals */
        .modal { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.98); display:none; align-items:center; justify-content:center; z-index:9000; padding: 20px; box-sizing: border-box; }
        .card { background: #fff; color:#000; padding:35px; width:100%; max-width:500px; text-align:center; border-radius: 4px; border-top: 5px solid var(--gold); }
        .premium-btn { background: #000; color: #fff; width: 100%; padding: 18px; border: none; font-weight: bold; cursor: pointer; text-transform: uppercase; margin-top: 15px; }
        
        /* Payment Styles */
        .pay-item { text-align: left; padding: 15px; background: #f9f9f9; margin-bottom: 12px; border: 1px solid #eee; cursor: pointer; transition: 0.2s; }
        .pay-item:hover { border-color: var(--gold); background: #fff; }
        .pay-name { font-weight: bold; color: var(--gold); font-size: 12px; display: block; margin-bottom: 5px; }
        .pay-addr { font-family: monospace; font-size: 13px; word-break: break-all; color: #222; }

        .zoom-tip { position: absolute; bottom: 10px; right: 10px; background: rgba(0,0,0,0.7); color: #fff; padding: 5px 10px; font-size: 10px; border-radius: 20px; pointer-events: none; }
    </style>
</head>
<body>

    <div class="top-nav">
        <div class="nav-left">
            <button class="nav-btn" onclick="downloadMap()">EXPORT HD MAP</button>
            <button class="nav-btn" onclick="openPayment()" style="border-color:var(--gold); color:var(--gold);">PAYMENT GATEWAY</button>
        </div>
        <div style="text-align: right; font-size: 11px;">
            <span style="color:var(--gold)">1,000,000 PIXELS</span><br>
            AVAILABLE: 1,000,000
        </div>
    </div>

    <div class="header-area">
        <h1 class="section-name">Social Creators</h1>
        <div style="font-size: 11px; letter-spacing: 5px; color: #555; margin-top: 5px;">OWN A PIECE OF INTERNET HISTORY</div>
    </div>
    
    <div class="viewport" id="viewport">
        <div class="canvas-wrapper" id="main-canvas">
            </div>
        <div class="zoom-tip">Use Mouse Wheel or Pinch to Zoom</div>
    </div>

    <div class="homepage-info">
        <div class="info-box">
            <div class="stat-line">1,000,000 pixels • $10 per unit • Min order: 20 units ($200)</div>
            <p>Welcome to the Social Creators Pixel Archive. Each 10x10 block represents a digital legacy in the creator economy. 
            Inspired by the original 2005 Million Dollar Homepage, this archive preserves the footprint of modern creators.
            Buy your space, upload your logo, and stay forever in the K ARCHIVE history.</p>
            <p style="color: #444; font-size: 10px; margin-top: 20px;">© 2026 K ARCHIVE | ALL RIGHTS RESERVED | POWERED BY SOCIAL CREATORS</p>
        </div>
    </div>

    <div id="order-modal" class="modal">
        <div class="card">
            <h3 style="color:var(--gold); margin:0;">ACQUIRE PLOTS</h3>
            <h1 id="disp-price" style="font-size: 50px; margin: 10px 0;">$200</h1>
            <p style="font-size:12px; color:#666;">Each 10x10 Plot = $10. Minimum order 20 Plots.</p>
            <input type="number" id="plot-qty" value="20" min="20" style="width:100%; padding:15px; text-align:center; font-size:20px; border:1px solid #ddd; margin: 15px 0;">
            <button class="premium-btn" onclick="submitOrder()">PROCEED TO WHATSAPP</button>
            <p onclick="closeModals()" style="cursor:pointer; font-size:10px; text-decoration: underline; margin-top:15px;">CANCEL</p>
        </div>
    </div>

    <div id="pay-modal" class="modal">
        <div class="card">
            <h2 style="margin-bottom: 25px; letter-spacing: 2px;">PAYMENT METHODS</h2>
            
            <div class="pay-item" onclick="copy('0x443792A4884e8e855f954ccEF910778Aff1eb78E')">
                <span class="pay-name">Metamask / Trust Wallet (ETH/BNB/Polygon)</span>
                <span class="pay-addr">0x443792A4884e8e855f954ccEF910778Aff1eb78E</span>
            </div>

            <div class="pay-item" onclick="copy('912221034')">
                <span class="pay-name">Binance UID</span>
                <span class="pay-addr">912221034</span>
            </div>

            <div class="pay-item" onclick="copy('TTapBkTqrDnzHbWzek6wSBUTcJKFmR8Ws6')">
                <span class="pay-name">USDT (TRC20 Address)</span>
                <span class="pay-addr">TTapBkTqrDnzHbWzek6wSBUTcJKFmR8Ws6</span>
            </div>

            <button class="premium-btn" onclick="closeModals()">CLOSE</button>
        </div>
    </div>

    <script type="module">
        import { db, ref, push, serverTimestamp } from "./firebase-config.js";

        const canvas = document.getElementById('main-canvas');
        const plotQty = document.getElementById('plot-qty');
        const dispPrice = document.getElementById('disp-price');
        let currentZoom = 1;

        // Create Grid (Click functionality)
        canvas.onclick = () => {
            document.getElementById('order-modal').style.display = 'flex';
        };

        plotQty.oninput = () => {
            let val = Math.max(20, plotQty.value);
            dispPrice.innerText = `$${val * 10}`;
        };

        // Zoom Logic
        window.addEventListener('wheel', (e) => {
            if (e.ctrlKey) {
                e.preventDefault();
                currentZoom += e.deltaY * -0.001;
                currentZoom = Math.min(Math.max(0.5, currentZoom), 3);
                canvas.style.transform = `scale(${currentZoom})`;
            }
        }, { passive: false });

        window.submitOrder = async () => {
            const qty = plotQty.value;
            if(qty < 20) return alert("Min order 20 units!");
            
            await push(ref(db, 'orders/SocialCreators'), { qty, price: qty*10, timestamp: serverTimestamp() });
            confetti({ particleCount: 150, spread: 70 });
            const msg = encodeURIComponent(`Hello K ARCHIVE,\nI want to buy ${qty} plots ($${qty*10}) on the Social Creators Map.`);
            window.open(`https://wa.me/8801576940717?text=${msg}`);
            closeModals();
        };

        window.openPayment = () => document.getElementById('pay-modal').style.display = 'flex';
        window.closeModals = () => document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
        window.copy = (t) => { navigator.clipboard.writeText(t); alert("Copied to Clipboard!"); };

        window.downloadMap = () => {
            const btn = event.target;
            btn.innerText = "CAPTURING HD...";
            html2canvas(document.getElementById('main-canvas'), { 
                backgroundColor: "#fff", 
                scale: 4, // High Quality
                useCORS: true 
            }).then(c => {
                const link = document.createElement('a');
                link.download = 'Social_Creators_HD_Map.png';
                link.href = c.toDataURL();
                link.click();
                btn.innerText = "EXPORT HD MAP";
            });
        };
    </script>
</body>
</html>
