<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>THE MILLIONAIRE REALM | GHOST CHAT</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="padding:20px; background:#050505;">
    <div style="max-width:800px; margin:0 auto;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h2 class="gold-text">GHOST CHAT <small style="color:#444;">(AUTO-WIPE 8H)</small></h2>
            <button onclick="location.href='index.html'" style="background:none; border:1px solid #333; color:#888; padding:5px 15px; cursor:pointer;">EXIT</button>
        </div>

        <div id="chatBox" style="height:65vh; overflow-y:auto; background:#000; border:1px solid #222; padding:25px; border-radius:15px; display:flex; flex-direction:column;"></div>
        
        <div style="margin-top:20px; display:grid; grid-template-columns: 1fr 1fr 2fr 100px; gap:10px;">
            <input type="text" id="realmName" placeholder="GAME (e.g. GTA)" style="padding:15px; background:#111; border:1px solid #333; color:var(--gold);">
            <input type="text" id="plotID" placeholder="PLOT #" style="padding:15px; background:#111; border:1px solid #333; color:var(--gold);">
            <input type="text" id="msgInput" placeholder="Message..." style="padding:15px; background:#111; border:1px solid #333; color:#fff;">
            <button id="sendBtn" style="background:var(--gold); border:none; font-weight:900; cursor:pointer; border-radius:5px;">SEND</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = { apiKey: "AIzaSyDmMgjlpXsk0Ip5Frrlifu6bgRJNNIIYzM", databaseURL: "https://aether-realms-default-rtdb.firebaseio.com", projectId: "aether-realms" };
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const chatRef = ref(db, 'ghost_chat');

        document.getElementById('sendBtn').onclick = () => {
            const r = document.getElementById('realmName').value;
            const p = document.getElementById('plotID').value;
            const m = document.getElementById('msgInput').value;
            if(!r || !p || !m) return alert("Fill all fields!");
            
            push(chatRef, { sender: `REALM: ${r.toUpperCase()} | PLOT: #${p}`, text: m, time: Date.now() });
            document.getElementById('msgInput').value = '';
        };

        onValue(chatRef, (snap) => {
            const box = document.getElementById('chatBox'); box.innerHTML = '';
            snap.forEach(child => {
                const d = child.val();
                box.innerHTML += `
                    <div class="msg-bubble">
                        <div class="msg-meta">${d.sender}</div>
                        <div style="color:#eee;">${d.text}</div>
                    </div>`;
            });
            box.scrollTop = box.scrollHeight;
        });
    </script>
</body>
</html>
