<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AETHER | Ghost Chat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="padding:20px; background:#050505;">
    <div style="max-width:800px; margin:0 auto;">
        <h2 class="gold-text">GHOST CHAT <small style="color:#444; font-size:10px;">AUTO-WIPE EVERY 8 HOURS</small></h2>
        <div id="chatBox" style="height:65vh; overflow-y:auto; background:#000; border:1px solid #222; padding:20px; margin-bottom:15px; border-radius:10px;"></div>
        
        <div style="display:flex; gap:10px;">
            <input type="text" id="msgInput" placeholder="Write encrypted message..." style="flex:1; padding:15px; background:#111; border:1px solid #333; color:#fff; border-radius:5px;">
            <button id="sendBtn" style="padding:15px 35px; background:var(--gold); border:none; cursor:pointer; font-weight:bold; border-radius:5px;">SEND</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDmMgjlpXsk0Ip5Frrlifu6bgRJNNIIYzM",
            databaseURL: "https://aether-realms-default-rtdb.firebaseio.com",
            projectId: "aether-realms"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const chatRef = ref(db, 'ghost_chat');

        document.getElementById('sendBtn').onclick = () => {
            const m = document.getElementById('msgInput').value;
            if(!m) return;
            push(chatRef, { text: m, time: Date.now() });
            document.getElementById('msgInput').value = '';
        };

        onValue(chatRef, (snap) => {
            const box = document.getElementById('chatBox');
            box.innerHTML = '';
            const now = Date.now();
            snap.forEach(child => {
                const d = child.val();
                if(now - d.time > 8*60*60*1000) { 
                    remove(ref(db, 'ghost_chat/'+child.key)); 
                } else {
                    box.innerHTML += `<div style="margin-bottom:15px; border-left:2px solid var(--gold); padding-left:10px;">
                        <div style="color:#eee; font-size:14px;">${d.text}</div>
                        <div style="color:#444; font-size:9px;">${new Date(d.time).toLocaleTimeString()}</div>
                    </div>`;
                }
            });
            box.scrollTop = box.scrollHeight;
        });
    </script>
</body>
</html>
